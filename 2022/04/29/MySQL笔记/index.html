<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"dengbowen.space","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="MySQL Notes一，什么是数据库1，所谓安装 MySQL 数据库，就是在主机安装一个数据库管理系统（DBMS），这个管理程序可以管理多个数据库，DBMS（database manage system) 2，一个数据库可以创建多张表，已保存数据（信息）。 3，数据库管理系统三层结构： ​	DBMS（数据库管理系统）-&gt; DB01（数据库），DB02（数据库）… -&gt; 表1，表2，视">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL笔记">
<meta property="og:url" content="https://dengbowen.space/2022/04/29/MySQL%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Bowen&#39;s Blog">
<meta property="og:description" content="MySQL Notes一，什么是数据库1，所谓安装 MySQL 数据库，就是在主机安装一个数据库管理系统（DBMS），这个管理程序可以管理多个数据库，DBMS（database manage system) 2，一个数据库可以创建多张表，已保存数据（信息）。 3，数据库管理系统三层结构： ​	DBMS（数据库管理系统）-&gt; DB01（数据库），DB02（数据库）… -&gt; 表1，表2，视">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-04-29T09:24:39.000Z">
<meta property="article:modified_time" content="2022-04-29T09:33:12.000Z">
<meta property="article:author" content="BowenDeng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://dengbowen.space/2022/04/29/MySQL%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://dengbowen.space/2022/04/29/MySQL%E7%AC%94%E8%AE%B0/","path":"2022/04/29/MySQL笔记/","title":"MySQL笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MySQL笔记 | Bowen's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Bowen's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Poor ability but loves to play</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-Notes"><span class="nav-number">1.</span> <span class="nav-text">MySQL Notes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.1.</span> <span class="nav-text">一，什么是数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%90%8E%E9%85%8D%E7%BD%AEmy-ini"><span class="nav-number">1.1.0.0.0.1.</span> <span class="nav-text">下载后配置my.ini</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#windows%E5%88%9D%E5%A7%8B%E5%8C%96mysql%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="nav-number">1.1.0.0.0.2.</span> <span class="nav-text">windows初始化mysql服务：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">1.2.</span> <span class="nav-text">二，数据库操作：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%BA%93%EF%BC%9A"><span class="nav-number">1.2.0.0.1.</span> <span class="nav-text">1，创建库：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E5%88%A0%E9%99%A4%E5%BA%93%EF%BC%9A"><span class="nav-number">1.2.0.0.2.</span> <span class="nav-text">2，删除库：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%BA%93%EF%BC%9A"><span class="nav-number">1.2.0.0.3.</span> <span class="nav-text">3，显示库：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9A"><span class="nav-number">1.2.0.0.4.</span> <span class="nav-text">4，备份数据库：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9A"><span class="nav-number">1.2.0.0.5.</span> <span class="nav-text">5，恢复数据库：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%EF%BC%8C%E5%88%97%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="nav-number">1.3.</span> <span class="nav-text">三，列类型：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%EF%BC%8C%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">1，常用数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="nav-number">1.3.0.1.0.1.</span> <span class="nav-text">（1）分类：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="nav-number">1.3.0.1.0.2.</span> <span class="nav-text">（2）数据类型：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="nav-number">1.3.0.1.0.3.</span> <span class="nav-text">（3）示例：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82%EF%BC%9A"><span class="nav-number">1.3.0.1.0.4.</span> <span class="nav-text">（4）字符串使用细节：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%EF%BC%8C%E8%A1%A8%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">1.4.</span> <span class="nav-text">四，表操作：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%A1%A8%EF%BC%9A"><span class="nav-number">1.4.0.0.1.</span> <span class="nav-text">1，创建表：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E5%88%A0%E9%99%A4%E8%A1%A8%EF%BC%9A"><span class="nav-number">1.4.0.0.2.</span> <span class="nav-text">2，删除表：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E4%BF%AE%E6%94%B9%E8%A1%A8%EF%BC%9A"><span class="nav-number">1.4.0.0.3.</span> <span class="nav-text">3，修改表：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C-%E8%A1%A8%E5%A4%8D%E5%88%B6"><span class="nav-number">1.4.0.0.4.</span> <span class="nav-text">4，*表复制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C-%E8%A1%A8%E5%8E%BB%E9%87%8D"><span class="nav-number">1.4.0.0.5.</span> <span class="nav-text">5，*表去重</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%EF%BC%8C%E5%88%97%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">1.5.</span> <span class="nav-text">五，列操作：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8CINSERT"><span class="nav-number">1.5.0.0.1.</span> <span class="nav-text">1，INSERT:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8CSELECT"><span class="nav-number">1.5.0.0.2.</span> <span class="nav-text">2，SELECT:</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">1.5.0.0.2.1.</span> <span class="nav-text">（1）基本语法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">1.5.0.0.2.2.</span> <span class="nav-text">（2）运算符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E5%88%AB%E5%90%8D"><span class="nav-number">1.5.0.0.2.3.</span> <span class="nav-text">（3）别名</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%8E%92%E5%BA%8F%E8%BE%93%E5%87%BA"><span class="nav-number">1.5.0.0.2.4.</span> <span class="nav-text">（4）排序输出</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%97%A5%E6%9C%9F%E6%AF%94%E8%BE%83"><span class="nav-number">1.5.0.0.2.5.</span> <span class="nav-text">（5）日期比较</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E5%90%AB%E6%9C%89-NULL-%E7%9A%84%E6%AF%94%E8%BE%83"><span class="nav-number">1.5.0.0.2.6.</span> <span class="nav-text">（6）含有 NULL 的比较</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%887%EF%BC%89%E6%9F%A5%E8%AF%A2%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">1.5.0.0.2.7.</span> <span class="nav-text">（7）查询表的结构</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%888%EF%BC%89%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.5.0.0.2.8.</span> <span class="nav-text">（8）分页查询</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8CUPDATE"><span class="nav-number">1.5.0.0.3.</span> <span class="nav-text">3，UPDATE:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8CDELETE"><span class="nav-number">1.5.0.0.4.</span> <span class="nav-text">4，DELETE:</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%EF%BC%8C%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.</span> <span class="nav-text">六，函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="nav-number">1.6.0.0.1.</span> <span class="nav-text">1，统计函数：</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%95%B0%E9%87%8F"><span class="nav-number">1.6.0.0.1.1.</span> <span class="nav-text">（1）数量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E2%80%94%E2%80%94%E7%BB%9F%E8%AE%A1-NULL-%E5%88%97%E6%96%B9%E6%B3%95"><span class="nav-number">1.6.0.0.1.2.</span> <span class="nav-text">——统计 NULL 列方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E2%80%94%E2%80%94%E5%8E%BB%E9%87%8D"><span class="nav-number">1.6.0.0.1.3.</span> <span class="nav-text">——去重</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E6%B1%82%E5%92%8C"><span class="nav-number">1.6.0.0.1.4.</span> <span class="nav-text">（2）求和</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%B1%82%E5%B9%B3%E5%9D%87"><span class="nav-number">1.6.0.0.1.5.</span> <span class="nav-text">（3）求平均</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%B1%82%E6%9E%81%E5%80%BC"><span class="nav-number">1.6.0.0.1.6.</span> <span class="nav-text">（4）求极值</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1%EF%BC%9A"><span class="nav-number">1.6.0.0.2.</span> <span class="nav-text">2，分组统计：</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89GROUP-BY"><span class="nav-number">1.6.0.0.2.1.</span> <span class="nav-text">（1）GROUP BY</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89having"><span class="nav-number">1.6.0.0.2.2.</span> <span class="nav-text">（2）having</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.0.0.3.</span> <span class="nav-text">3，字符串函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.0.0.4.</span> <span class="nav-text">4，数学函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.0.0.5.</span> <span class="nav-text">5，日期函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6%EF%BC%8C%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.0.0.6.</span> <span class="nav-text">6，加密函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89MD5"><span class="nav-number">1.6.0.0.6.1.</span> <span class="nav-text">（1）MD5</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89PASSWORD"><span class="nav-number">1.6.0.0.6.2.</span> <span class="nav-text">（2）PASSWORD</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7%EF%BC%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="nav-number">1.6.0.0.7.</span> <span class="nav-text">7，流程控制函数</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%EF%BC%8C-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.7.</span> <span class="nav-text">七，*多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E7%AC%9B%E5%8D%A1%E5%B0%94%E9%9B%86%EF%BC%9A"><span class="nav-number">1.7.0.0.1.</span> <span class="nav-text">1，笛卡尔集：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E6%9D%A1%E4%BB%B6%E8%BF%87%E6%BB%A4%EF%BC%9A"><span class="nav-number">1.7.0.0.2.</span> <span class="nav-text">2，条件过滤：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E8%87%AA%E8%BF%9E%E6%8E%A5%EF%BC%9A"><span class="nav-number">1.7.0.0.3.</span> <span class="nav-text">3，自连接：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-number">1.7.0.0.4.</span> <span class="nav-text">4，子查询：</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="nav-number">1.7.0.0.4.1.</span> <span class="nav-text">（1）概念：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-number">1.7.0.0.4.2.</span> <span class="nav-text">（2）单行子查询：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-number">1.7.0.0.4.3.</span> <span class="nav-text">（3）多行子查询：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%B8%B4%E6%97%B6%E8%A1%A8%EF%BC%9A"><span class="nav-number">1.7.0.0.4.4.</span> <span class="nav-text">（4）子查询临时表：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%885%EF%BC%89ALL-%E6%93%8D%E4%BD%9C%E7%AC%A6%EF%BC%9A"><span class="nav-number">1.7.0.0.4.5.</span> <span class="nav-text">（5）ALL 操作符：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E5%A4%9A%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-number">1.7.0.0.4.6.</span> <span class="nav-text">（6）多列子查询：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="nav-number">1.7.0.0.5.</span> <span class="nav-text">5，合并查询：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6%EF%BC%8C%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.7.0.0.6.</span> <span class="nav-text">6，外连接</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%EF%BC%8C%E7%BA%A6%E6%9D%9F"><span class="nav-number">1.8.</span> <span class="nav-text">八，约束</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E5%AE%9A%E4%B9%89%EF%BC%9A"><span class="nav-number">1.8.0.0.1.</span> <span class="nav-text">1，定义：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8CPRIMARY-KEY"><span class="nav-number">1.8.0.0.2.</span> <span class="nav-text">2，PRIMARY KEY</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8CNOT-NULL"><span class="nav-number">1.8.0.0.3.</span> <span class="nav-text">3，NOT NULL</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8CUNIQUE"><span class="nav-number">1.8.0.0.4.</span> <span class="nav-text">4，UNIQUE</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8CFOREIGN-KEY"><span class="nav-number">1.8.0.0.5.</span> <span class="nav-text">5，FOREIGN KEY</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6%EF%BC%8CCHECK"><span class="nav-number">1.8.0.0.6.</span> <span class="nav-text">6，CHECK</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7%EF%BC%8CAUTO-INCREMENT"><span class="nav-number">1.8.0.0.7.</span> <span class="nav-text">7，AUTO INCREMENT</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%EF%BC%8C%E7%B4%A2%E5%BC%95"><span class="nav-number">1.9.</span> <span class="nav-text">九，索引</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86"><span class="nav-number">1.9.0.0.1.</span> <span class="nav-text">1，索引原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.9.0.0.2.</span> <span class="nav-text">2，索引的类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%98%AF%E5%90%A6%E6%9C%89%E7%B4%A2%E5%BC%95"><span class="nav-number">1.9.0.0.3.</span> <span class="nav-text">3，查询是否有索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">1.9.0.0.4.</span> <span class="nav-text">4，创建索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">1.9.0.0.5.</span> <span class="nav-text">5，删除索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%B4%A2%E5%BC%95"><span class="nav-number">1.9.0.0.6.</span> <span class="nav-text">6，查询索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7%EF%BC%8C%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%9B%E5%BB%BA%E6%8A%80%E5%B7%A7"><span class="nav-number">1.9.0.0.7.</span> <span class="nav-text">7，索引的创建技巧</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%EF%BC%8C%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.10.</span> <span class="nav-text">十，事务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="nav-number">1.10.0.0.1.</span> <span class="nav-text">1，概念：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81%EF%BC%9A"><span class="nav-number">1.10.0.0.2.</span> <span class="nav-text">2，事务和锁：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="nav-number">1.10.0.0.3.</span> <span class="nav-text">3，数据库控制台事务的几个重要操作：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E4%B8%BE%E4%BE%8B%EF%BC%9A"><span class="nav-number">1.10.0.0.4.</span> <span class="nav-text">4，举例：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%EF%BC%8C%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%9A"><span class="nav-number">1.10.0.0.5.</span> <span class="nav-text">5，事务隔离级别：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%EF%BC%8C%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.11.</span> <span class="nav-text">十一，存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E4%BB%8B%E7%BB%8D%EF%BC%9A"><span class="nav-number">1.11.0.0.1.</span> <span class="nav-text">1，介绍：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E4%B8%BB%E6%B5%81%E8%A1%A8%E7%B1%BB%E5%9E%8B%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="nav-number">1.11.0.0.2.</span> <span class="nav-text">2，主流表类型区别：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="nav-number">1.11.0.0.3.</span> <span class="nav-text">3，基本使用：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%EF%BC%8C%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%9A"><span class="nav-number">1.11.0.0.4.</span> <span class="nav-text">4，如何选择存储引擎：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%EF%BC%8C%E8%A7%86%E5%9B%BE%E5%8E%9F%E7%90%86"><span class="nav-number">1.12.</span> <span class="nav-text">十二，视图原理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8C%E6%A6%82%E5%BF%B5%EF%BC%9A-1"><span class="nav-number">1.12.0.0.1.</span> <span class="nav-text">1，概念：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">1.12.0.0.2.</span> <span class="nav-text">2，基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82%EF%BC%9A"><span class="nav-number">1.12.0.0.3.</span> <span class="nav-text">3，使用细节：</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86"><span class="nav-number">1.13.</span> <span class="nav-text">十三，数据库管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%EF%BC%8CMySQL-%E7%94%A8%E6%88%B7%EF%BC%9A"><span class="nav-number">1.13.0.0.1.</span> <span class="nav-text">1，MySQL 用户：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%EF%BC%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="nav-number">1.13.0.0.2.</span> <span class="nav-text">2，基本使用：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%EF%BC%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%EF%BC%9A"><span class="nav-number">1.13.0.0.3.</span> <span class="nav-text">3，权限管理：</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E6%9D%83%E9%99%90"><span class="nav-number">1.13.0.0.3.1.</span> <span class="nav-text">常见权限</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">1.13.0.0.3.2.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82"><span class="nav-number">1.13.0.0.3.3.</span> <span class="nav-text">使用细节</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BowenDeng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dengbowen.space/2022/04/29/MySQL%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BowenDeng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bowen's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="MySQL笔记 | Bowen's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-29 17:24:39 / 修改时间：17:33:12" itemprop="dateCreated datePublished" datetime="2022-04-29T17:24:39+08:00">2022-04-29</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="MySQL-Notes"><a href="#MySQL-Notes" class="headerlink" title="MySQL Notes"></a>MySQL Notes</h1><h2 id="一，什么是数据库"><a href="#一，什么是数据库" class="headerlink" title="一，什么是数据库"></a>一，什么是数据库</h2><p>1，所谓安装 MySQL 数据库，就是在主机安装一个数据库管理系统（DBMS），这个管理程序可以管理多个数据库，DBMS（database manage system)</p>
<p>2，一个数据库可以创建多张表，已保存数据（信息）。</p>
<p>3，数据库管理系统三层结构：</p>
<p>​	DBMS（数据库管理系统）-&gt; DB01（数据库），DB02（数据库）… -&gt; 表1，表2，视图，触发器….</p>
<p>4，客户端连接方式：	</p>
<p>​	客户终端（DoS，SQLyog，java）-&gt; port 3306 -&gt; MySQL</p>
<p>5，数据在数据库中的存储方式：</p>
<p>​	表：多行多列存储数据，普通表就是一个文件</p>
<p>​	表的一行称为一条记录，在java程序中往往对应一个对象</p>
<p>6，SQL 语句分类：</p>
<p>​	DDL：数据定义语句[create]</p>
<p>​	DML：数据操作语句[insert,delete,update]</p>
<p>​	DQL：数据查询语句[select]</p>
<p>​	DCL：数据控制语句[grand,revoke]</p>
<p>7，如何操作数据库：</p>
<p>​	DoS，SQLyog，java</p>
<h6 id="下载后配置my-ini"><a href="#下载后配置my-ini" class="headerlink" title="下载后配置my.ini"></a>下载后配置my.ini</h6><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"> </span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span> = <span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=C:\\web\\mysql-<span class="number">8.0</span>.<span class="number">11</span></span><br><span class="line"><span class="comment"># 设置 mysql数据库的数据的存放目录，MySQL 8+ 不需要以下配置，系统自己生成即可，否则有可能报错</span></span><br><span class="line"><span class="comment"># datadir=C:\\web\\sqldata</span></span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">20</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为8比特编码的latin1字符集</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br></pre></td></tr></table></figure>

<h6 id="windows初始化mysql服务："><a href="#windows初始化mysql服务：" class="headerlink" title="windows初始化mysql服务："></a>windows初始化mysql服务：</h6><p>安装</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld -install</span><br></pre></td></tr></table></figure>

<p>初始化</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure>



<h2 id="二，数据库操作："><a href="#二，数据库操作：" class="headerlink" title="二，数据库操作："></a>二，数据库操作：</h2><h5 id="1，创建库："><a href="#1，创建库：" class="headerlink" title="1，创建库："></a>1，创建库：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE DB01;</span><br><span class="line"></span><br><span class="line">#创建数据库且为Utf8字符集</span><br><span class="line">CREATE DATABASE DB01 CHARACTER SET utf8;</span><br><span class="line"></span><br><span class="line">#创建数据库使用utf8字符集，并且校对规则为utf8</span><br><span class="line">CREATE DATABASE DB01 CHARACTER SET utf8 COLLATE utf8_bin;</span><br><span class="line">#校对规则：_bin 区分大小写，默认校对规则不区分大小写</span><br><span class="line"></span><br><span class="line">#用反引号可以规避关键字</span><br></pre></td></tr></table></figure>

<h5 id="2，删除库："><a href="#2，删除库：" class="headerlink" title="2，删除库："></a>2，删除库：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE DB01;</span><br></pre></td></tr></table></figure>

<h5 id="3，显示库："><a href="#3，显示库：" class="headerlink" title="3，显示库："></a>3，显示库：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#查看指定数据库</span><br><span class="line">SHOW CREATE DATABASE DB01;</span><br><span class="line"></span><br><span class="line">#查看所有的数据库</span><br><span class="line">SHOW DATABASES;</span><br></pre></td></tr></table></figure>

<h5 id="4，备份数据库："><a href="#4，备份数据库：" class="headerlink" title="4，备份数据库："></a>4，备份数据库：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#命令行操作</span><br><span class="line">mysqldump -u 用户名 -p 密码 -B 数据库名称 &gt; （路径）\\文件名.sql</span><br></pre></td></tr></table></figure>

<h5 id="5，恢复数据库："><a href="#5，恢复数据库：" class="headerlink" title="5，恢复数据库："></a>5，恢复数据库：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#假如现在删除了一个数据库：</span><br><span class="line">DROP DATABASE DB01;</span><br><span class="line"></span><br><span class="line">#恢复数据库，在cmd中操作：</span><br><span class="line">source（路径）\\文件名.sql</span><br><span class="line"></span><br><span class="line">#也可以直接把 bak.sql 语句粘贴到 SQLyog中</span><br></pre></td></tr></table></figure>



<h2 id="三，列类型："><a href="#三，列类型：" class="headerlink" title="三，列类型："></a>三，列类型：</h2><h4 id="1，常用数据类型"><a href="#1，常用数据类型" class="headerlink" title="1，常用数据类型"></a>1，常用数据类型</h4><h6 id="（1）分类："><a href="#（1）分类：" class="headerlink" title="（1）分类："></a>（1）分类：</h6><p>​	数值类型，文本二进制类型，时间日期</p>
<h6 id="（2）数据类型："><a href="#（2）数据类型：" class="headerlink" title="（2）数据类型："></a>（2）数据类型：</h6><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BIT[UNSIGNED]</td>
<td align="center">位类型，M指定位数，默认值是1，范围1-64</td>
</tr>
<tr>
<td align="center">TINYINT[UNSIGNED]</td>
<td align="center">占1个字节。带符号的范围是 -128 到 127，无符号的是 0 到 255，默认有符号</td>
</tr>
<tr>
<td align="center">SMALLINT[UNSIGNED]</td>
<td align="center">占2个字节。带符号的范围是 -2^15 到 2^15-1 ，无符号的是 0 到 2^16-1</td>
</tr>
<tr>
<td align="center">MEDIUMINT[UNSIGNED]</td>
<td align="center">占3个字节。带符号的范围是 -2^23 到 2^23-1 ，无符号的是 0 到 2^24-1</td>
</tr>
<tr>
<td align="center">INT[UNSIGNED]</td>
<td align="center">占4个字节。带符号的范围是 -2^31 到 2^31-1 ，无符号的是 0 到 2^32-1</td>
</tr>
<tr>
<td align="center">BIGINT[UNSIGNED]</td>
<td align="center">占8个字节。带符号的范围是 -2^63 到 2^63-1 ，无符号的是 0 到 2^64-1</td>
</tr>
<tr>
<td align="center">FLOAT[UNSIGNED]</td>
<td align="center">占用 4 个字节</td>
</tr>
<tr>
<td align="center">DOUBLE[UNSIGNED]</td>
<td align="center">占用 8 个字节</td>
</tr>
<tr>
<td align="center">DECIMAL（M，D）[UNSIGNED]</td>
<td align="center">变长。定点数 M 指定长度，D 表示小数点后的位数</td>
</tr>
<tr>
<td align="center">CHAR(size)</td>
<td align="center">固定长度字符串，最大 255</td>
</tr>
<tr>
<td align="center">VARCHAR(size)</td>
<td align="center">可变长度字符串，0 ～ 65535 即 2^16-1</td>
</tr>
<tr>
<td align="center">BLOB LONGBLOB</td>
<td align="center">二进制数据 BLOB 0 ～ 2^16-1 LONG版本0 ～ 2^32-1</td>
</tr>
<tr>
<td align="center">TEXT LONGTEXT</td>
<td align="center">文本 TEXT 0 ～ 2^16-1 LONG版本0 ～ 2^32-1</td>
</tr>
<tr>
<td align="center">DATE&#x2F;DATETIME&#x2F;TimeStamp</td>
<td align="center">日期类型DATE（YYYY——MM——DD），DATETIME（YYYY——MM——DD HH：MM：SS），TimeStamp 表示时间戳，可用于自动记录 insert ，update 操作的时间</td>
</tr>
</tbody></table>
<h6 id="（3）示例："><a href="#（3）示例：" class="headerlink" title="（3）示例："></a>（3）示例：</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE T3(</span><br><span class="line">id TINYINT);</span><br><span class="line"></span><br><span class="line">#可以插入</span><br><span class="line">INSERT INTO T3 VALUES(-128);</span><br><span class="line"></span><br><span class="line">#不可以插入</span><br><span class="line">INSERT INTO T3 VALUES(-129);</span><br><span class="line"></span><br><span class="line">#根据已给定的范围来确定 m = 8 是一个字节 0~255</span><br><span class="line">CREATE TABLE T4(num bit(8));</span><br><span class="line"></span><br><span class="line">#定长字符串最多255字符，变长字符串最多 65535 字节，减去末尾检测需要 1-3 个字节除以字符占用字节数得出最多存储 UTF8 编码的字符 21844个，gbk 编码的字符 32766 个.</span><br><span class="line">CREATE TABLE T5(address CHAR(255));</span><br><span class="line">CREATE TABLE T6(name VARCHAR(32766));</span><br><span class="line"></span><br><span class="line">#日期类型</span><br><span class="line">CREATE TABLE birthday(</span><br><span class="line">	t1 DATE,</span><br><span class="line">	t2 DATETIME,</span><br><span class="line">	t3 TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);</span><br><span class="line">#NOT NULL 不许为空，DEFAULT CURRENT_TIMESTAMP 当前时间，ON UPDATE CURRENT_TIMESTAMP 自动更新（需要配置）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="（4）字符串使用细节："><a href="#（4）字符串使用细节：" class="headerlink" title="（4）字符串使用细节："></a>（4）字符串使用细节：</h6><p>​	1， char（num) 中 num 表示字符数，不是字节数，不管中英文都是 4 个</p>
<p>​		varchar（num）中 num 表示字符数，不是字节数，不管中英文都是 4 个</p>
<p>​	2， char（num）是定长（固定的大小），所以无论写入多少个字符都占 num 个字符</p>
<p>​		varchar （num）是变长，按实际使用空间来分配</p>
<p>​	3， 如果存放数据是定长，推荐用 char；如果不确定，就用 varchar</p>
<p>​	4， 在存放文本时，也可以使用 Text 数据类型，可以将 TEXT列 视为 VARCHAR列。Text 不能有默认值，大小 0~2^16 字节，如果希望存放更多，则可		以选择 MEDIUMTEXT 或者 LONGTEXT	</p>
<h2 id="四，表操作："><a href="#四，表操作：" class="headerlink" title="四，表操作："></a>四，表操作：</h2><h5 id="1，创建表："><a href="#1，创建表：" class="headerlink" title="1，创建表："></a>1，创建表：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name</span><br><span class="line">(</span><br><span class="line">    field1 datatype,</span><br><span class="line">    field2 datatype,</span><br><span class="line">    field3 datatype</span><br><span class="line">)CHARACTER SET 字符集 COLLATE 校对规则 ENGINE 存储引擎</span><br><span class="line"></span><br><span class="line">#FIELD 指定列名 DATATYPE 指定列类型 CHARACTER SET 如不指定为所在数据库的字符集 COLLATE 如不指定为所在数据库的校对规则</span><br></pre></td></tr></table></figure>

<p>实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE db01 (</span><br><span class="line">	id INT,</span><br><span class="line">	`name` VARCHAR(255),</span><br><span class="line">	`password` VARCHAR(255),</span><br><span class="line">	`birthday` DATE)</span><br><span class="line">	CHARACTER SET utf8 COLLATE utf8_bin；</span><br></pre></td></tr></table></figure>



<h5 id="2，删除表："><a href="#2，删除表：" class="headerlink" title="2，删除表："></a>2，删除表：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE table_name ;</span><br></pre></td></tr></table></figure>



<h5 id="3，修改表："><a href="#3，修改表：" class="headerlink" title="3，修改表："></a>3，修改表：</h5><p>添加列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#在员工信息中加 image 列，varchar类型，在 resume列 后面</span><br><span class="line">ALTER TABLE tablename</span><br><span class="line">ADD image VARCHAR(32) DEFAULT &#x27;&#x27; AFTER RESUME;</span><br></pre></td></tr></table></figure>

<p>修改列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#在员工信息中修改 job 列</span><br><span class="line">ALTER TABLE tablename</span><br><span class="line">	MODIFY job VARCHAR(60) DEFAULT &#x27;&#x27; AFTER RESUME;</span><br></pre></td></tr></table></figure>

<p>删除列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#在员工信息中删除 job 列</span><br><span class="line">ALTER TABLE tablename</span><br><span class="line">	DROP sex;</span><br></pre></td></tr></table></figure>

<p>修改表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME TABLE tablename TO employee;</span><br></pre></td></tr></table></figure>

<p>修改字符集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE employee CHARACTER SET utf8;</span><br></pre></td></tr></table></figure>

<p>修改列名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE employee </span><br><span class="line">	CHANGE user_name VARCHAR(64) NOT NULL DEFAULT &#x27;&#x27;;</span><br></pre></td></tr></table></figure>

<h5 id="4，-表复制"><a href="#4，-表复制" class="headerlink" title="4，*表复制"></a>4，*表复制</h5><p>复制其它表的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO my_tab01</span><br><span class="line">		(id,`name`,sal,job,deptno)</span><br><span class="line">		SELECT empno,name,sal,job,deptno FROM emp;</span><br></pre></td></tr></table></figure>

<p>自我复制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO my_tab01</span><br><span class="line">		FROM my_tab01;</span><br></pre></td></tr></table></figure>

<h5 id="5，-表去重"><a href="#5，-表去重" class="headerlink" title="5，*表去重"></a>5，*表去重</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO my_tmp</span><br><span class="line">	SELECT DISTINCT * FROM my_tab02;</span><br><span class="line">DELETE FROM  my_tab02;</span><br><span class="line">INSERT INTO my_tab02</span><br><span class="line">	SELECT * FROM my_tmp;</span><br><span class="line">DROP FROM my_tmp;</span><br></pre></td></tr></table></figure>



<h2 id="五，列操作："><a href="#五，列操作：" class="headerlink" title="五，列操作："></a>五，列操作：</h2><h5 id="1，INSERT"><a href="#1，INSERT" class="headerlink" title="1，INSERT:"></a>1，INSERT:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 假如现在有一个列定义如下：</span><br><span class="line">CREATE TABLE `goods`(</span><br><span class="line">	id INT,</span><br><span class="line">	goods_name VARCHAR(10),</span><br><span class="line">	price DOUBLE);</span><br><span class="line"></span><br><span class="line">INSERT INTO `goods`(id, goods_name, price)</span><br><span class="line">	VALUES(10, &#x27;华为手机&#x27;, 2000);</span><br><span class="line">INSERT INTO `goods`(id, goods_name, price)</span><br><span class="line">	VALUES(20, &#x27;苹果手机&#x27;, 3000);</span><br></pre></td></tr></table></figure>

<p>使用细节：</p>
<p>​	1，插入的数据应该与字段的数据类型相同</p>
<p>​	2，数据的长度应该在列的规定范围内</p>
<p>​	3，在 values 中列出的数据位置应该与被加入的列的排列位置相对应</p>
<p>​	4，字符和日期数据应包含在单引号中</p>
<p>​	5，列可以插入空值（当然不能有 NOT NULL）限制</p>
<p>​	6，insert into tab_name value（），（），（）形式可添加多条记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `goods`(id, goods_name, price)</span><br><span class="line">	VALUES(10, &#x27;华为手机&#x27;, 2000)，(20, &#x27;苹果手机&#x27;, 3000);</span><br></pre></td></tr></table></figure>

<p>​	7，如果是给表中的所有字段添加数据，可以不写前面的字段名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `goods`</span><br><span class="line">	VALUES(10, &#x27;华为手机&#x27;, 2000)，(20, &#x27;苹果手机&#x27;, 3000);</span><br></pre></td></tr></table></figure>

<p>​	8，默认值的使用，当不给某个字段值时，如果有默认值就会添加，否则报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 假如现在有一个列定义如下：</span><br><span class="line">CREATE TABLE `goods`(</span><br><span class="line">	id INT NOT NULL,</span><br><span class="line">	goods_name VARCHAR(10),</span><br><span class="line">	price DOUBLE);</span><br><span class="line"></span><br><span class="line">INSERT INTO `goods`(id, goods_name, price)</span><br><span class="line">	VALUES(10, &#x27;华为手机&#x27;, 2000);</span><br><span class="line">	</span><br><span class="line">INSERT INTO &#x27;goods&#x27;(id, goods_name)</span><br><span class="line">	VALUES(20, &#x27;苹果手机&#x27;);</span><br></pre></td></tr></table></figure>



<h5 id="2，SELECT"><a href="#2，SELECT" class="headerlink" title="2，SELECT:"></a>2，SELECT:</h5><p>假设现在有一个表叫 student</p>
<h6 id="（1）基本语法"><a href="#（1）基本语法" class="headerlink" title="（1）基本语法"></a>（1）基本语法</h6><p>查询表中所有的信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student;</span><br></pre></td></tr></table></figure>

<p>查询表中指定的列比如 name 以及对应的英语成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name`,english FROM student;</span><br></pre></td></tr></table></figure>

<p>过滤列中重复数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT english FROM student</span><br></pre></td></tr></table></figure>

<p>过滤表中重复数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT `name`,english FROM student</span><br></pre></td></tr></table></figure>

<h6 id="（2）运算符"><a href="#（2）运算符" class="headerlink" title="（2）运算符"></a>（2）运算符</h6><p>使用表达式对列运算，比如输出学生总成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name`,(chinese + english + math) FROM student;</span><br></pre></td></tr></table></figure>

<p>常见运算符</p>
<table>
<thead>
<tr>
<th align="center">比较运算符</th>
<th align="center">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BETWEEN    ….AND…</td>
<td align="center">显示某一区间的值</td>
</tr>
<tr>
<td align="center">IN(set)</td>
<td align="center">显示在 in 列表中的值，例：in(100,200)</td>
</tr>
<tr>
<td align="center">LIKE    &#x2F;     NOT LIKE</td>
<td align="center">模糊查询</td>
</tr>
<tr>
<td align="center">IS NULL</td>
<td align="center">判断是否为空</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">逻辑运算符</th>
<th align="center">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AND</td>
<td align="center">多个条件同时成立</td>
</tr>
<tr>
<td align="center">OR</td>
<td align="center">多个条件任一成立</td>
</tr>
<tr>
<td align="center">NOT</td>
<td align="center">不成立</td>
</tr>
</tbody></table>
<p>举例：</p>
<p>查询姓名为 bowen 的成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student WHERE `name` = &#x27;bowen&#x27;</span><br></pre></td></tr></table></figure>

<p>查询总成绩大于 90 小于 95 ,语文成绩大于数学成绩姓 deng 的（以邓开头的）同学</p>
<p>*以及名字中间是 ‘博’ 的同学</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student WHERE (english + math + chinese) &gt; 90 AND (english + math + chinese) &lt; 95 AND chinese &gt; math AND `name` LIKE &#x27;deng%&#x27;;\</span><br><span class="line">#使用 between 和 and</span><br><span class="line">SELECT * FROM student WHERE (english + math + chinese)  BETWEEN 90 AND 95 AND chinese &gt; math AND `name` LIKE &#x27;deng%&#x27;;</span><br><span class="line">#名字中间是 博</span><br><span class="line">SELECT * FROM student WHERE `name` LIKE &#x27;_博_&#x27;;</span><br></pre></td></tr></table></figure>

<p>查询总成绩为 91 92 93 的同学</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student WHERE (english + math + chinese) IN (91,92,93);</span><br></pre></td></tr></table></figure>

<h6 id="（3）别名"><a href="#（3）别名" class="headerlink" title="（3）别名"></a>（3）别名</h6><p>使用别名输出数据，如总成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name` AS &#x27;名字&#x27; , (chinese + english + math + 10) AS total_score FROM student;</span><br></pre></td></tr></table></figure>

<h6 id="（4）排序输出"><a href="#（4）排序输出" class="headerlink" title="（4）排序输出"></a>（4）排序输出</h6><p>order by演示：将学生按总成绩从高到低排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student，（chinese + english + math) AS total_score ORDER BY total_score DESC;</span><br></pre></td></tr></table></figure>

<p>将学生按总成绩从低到高排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student，（chinese + english + math) AS total_score ORDER BY total_score;</span><br></pre></td></tr></table></figure>

<h6 id="（5）日期比较"><a href="#（5）日期比较" class="headerlink" title="（5）日期比较"></a>（5）日期比较</h6><p>可以无脑直接进行比较</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student</span><br><span class="line">		WHERE birthdate &gt; &#x27;2001-09-01&#x27;</span><br></pre></td></tr></table></figure>

<h6 id="（6）含有-NULL-的比较"><a href="#（6）含有-NULL-的比较" class="headerlink" title="（6）含有 NULL 的比较"></a>（6）含有 NULL 的比较</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student</span><br><span class="line">		WHERE score IS NULL;</span><br></pre></td></tr></table></figure>

<h6 id="（7）查询表的结构"><a href="#（7）查询表的结构" class="headerlink" title="（7）查询表的结构"></a>（7）查询表的结构</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC student;</span><br></pre></td></tr></table></figure>

<h6 id="（8）分页查询"><a href="#（8）分页查询" class="headerlink" title="（8）分页查询"></a>（8）分页查询</h6><p>取出本次考试成绩前三的同学，LIMIT 中 0 代表表的第一行，3 表示从 参数一 开始取三行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student</span><br><span class="line">		ORDER BY score DESC</span><br><span class="line">		LIMIT 0,3;</span><br></pre></td></tr></table></figure>



<h5 id="3，UPDATE"><a href="#3，UPDATE" class="headerlink" title="3，UPDATE:"></a>3，UPDATE:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 慎用，所有 employee 的 salary 列都会改为 5000</span><br><span class="line">UPDATE employee SET salary = 5000;</span><br><span class="line"></span><br><span class="line"># 更改名为 moyu 的 employee 的 salary 列至 3000</span><br><span class="line">UPDATE employee </span><br><span class="line">	SET salary = 3000</span><br><span class="line">		WHERE user_name = &#x27;moyu&#x27;;</span><br><span class="line">		</span><br><span class="line"># 更改名为 moyu 的 employee 的 salary 列减 2000</span><br><span class="line">UPDATE employee </span><br><span class="line">	SET salary = salary - 2000</span><br><span class="line">		WHERE user_name = &#x27;moyu&#x27;;</span><br></pre></td></tr></table></figure>

<p>使用细节：</p>
<p>​	1，UPDATE 语句可以用新值更新原有表行中的各列</p>
<p>​	2，SET 子句指示要修改哪些列和要给予哪些值</p>
<p>​	3，WHERE 子句指定应更新那些行。如果没有 WHERE 子句，则更新所有行</p>
<p>​	4，如果要修改多个字段，可以通过 SET 字段1 &#x3D; 值1，字段2 &#x3D; 值2……</p>
<h5 id="4，DELETE"><a href="#4，DELETE" class="headerlink" title="4，DELETE:"></a>4，DELETE:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 慎用，删除所有 employee 的数据</span><br><span class="line">DELETE FROM employee;</span><br><span class="line"></span><br><span class="line"># 删除表中 moyu 的信息</span><br><span class="line">DELETE FROM employee</span><br><span class="line">	WHERE user_name = &#x27;moyu&#x27;;</span><br></pre></td></tr></table></figure>

<p>使用细节：</p>
<p>​	1，不使用 WHERE，就会删除所有数据</p>
<p>​	2，Delete 语句不能删除某一列的值（可以使用 update 设为 NULL 或者 ‘’</p>
<p>​	3，使用 DELETE 语句仅删除记录，不删除表本身，如果删除表，使用 DROP TABLE 语句。</p>
<h2 id="六，函数"><a href="#六，函数" class="headerlink" title="六，函数"></a>六，函数</h2><h5 id="1，统计函数："><a href="#1，统计函数：" class="headerlink" title="1，统计函数："></a>1，统计函数：</h5><h6 id="（1）数量"><a href="#（1）数量" class="headerlink" title="（1）数量"></a>（1）数量</h6><p>统计英语成绩大于 90 分的人数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) FROM student WHERE english &gt; 90;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COUNT(*) 统计列数，COUNT(`列名`)统计指定列非空列数</span><br></pre></td></tr></table></figure>

<h6 id="——统计-NULL-列方法"><a href="#——统计-NULL-列方法" class="headerlink" title="——统计 NULL 列方法"></a>——统计 NULL 列方法</h6><p>​	1，三元运算符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*),COUNT(IF(comm IS NULL,1,NULL))</span><br><span class="line">		FROM emp;</span><br></pre></td></tr></table></figure>

<p>​	2，相减</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*),COUNT(*) - COUNT(comm)</span><br><span class="line">		FROM emp;</span><br></pre></td></tr></table></figure>

<h6 id="——去重"><a href="#——去重" class="headerlink" title="——去重"></a>——去重</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT (DISTINCT mqr)</span><br><span class="line">		FROM emp;</span><br></pre></td></tr></table></figure>



<h6 id="（2）求和"><a href="#（2）求和" class="headerlink" title="（2）求和"></a>（2）求和</h6><p>统计表中英语，数学成绩总和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(math) AS total_score ，SUM(english) FROM student;</span><br></pre></td></tr></table></figure>

<p>统计英语平均分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUM(english)/COUNT(*) FROM student;</span><br></pre></td></tr></table></figure>

<h6 id="（3）求平均"><a href="#（3）求平均" class="headerlink" title="（3）求平均"></a>（3）求平均</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(math) FROM student;</span><br></pre></td></tr></table></figure>

<h6 id="（4）求极值"><a href="#（4）求极值" class="headerlink" title="（4）求极值"></a>（4）求极值</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT MAX(math) FROM student;</span><br><span class="line">SELECT MIN(math) FROM student;</span><br></pre></td></tr></table></figure>

<p>注意：只能对数值运算</p>
<h5 id="2，分组统计："><a href="#2，分组统计：" class="headerlink" title="2，分组统计："></a>2，分组统计：</h5><h6 id="（1）GROUP-BY"><a href="#（1）GROUP-BY" class="headerlink" title="（1）GROUP BY"></a>（1）GROUP BY</h6><p>查询最高分与平均分，按每个班输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(english + amth + chinese) , MAX(english + amth + chinese) </span><br><span class="line">	FROM student GROUP BY class;</span><br></pre></td></tr></table></figure>

<p>查询最高分与平均分，按每个年级每个班输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(english + amth + chinese) , MAX(english + amth + chinese) </span><br><span class="line">	FROM student GROUP BY grade,class;</span><br></pre></td></tr></table></figure>

<h6 id="（2）having"><a href="#（2）having" class="headerlink" title="（2）having"></a>（2）having</h6><p>查询最高分与平均分，按每个班输出，找出平均分 200 以下的班级以方便校长约谈班主任</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT AVG(english + amth + chinese) AS avg_score , MAX(english + amth + chinese)    </span><br><span class="line">	FROM student GROUP BY class</span><br><span class="line">		HAVING avg_score &lt; 2000;</span><br></pre></td></tr></table></figure>



<h5 id="3，字符串函数"><a href="#3，字符串函数" class="headerlink" title="3，字符串函数"></a>3，字符串函数</h5><p>返回字符串字符集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CHARSET(ename) FROM student;</span><br></pre></td></tr></table></figure>

<p>连接子串，拼成一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT COMBAT (ename，&#x27;get&#x27;，english，&#x27;grades in english test&#x27;) FROM student;</span><br></pre></td></tr></table></figure>

<p>返回substring在string中出现的位置，没有则返回 0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT INSTR)&#x27;dengbowen&#x27;,&#x27;deng&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>转换成大写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT UCASE(ename) FROM student;</span><br></pre></td></tr></table></figure>

<p>转换成小写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LCASE(ename) FROM student;</span><br></pre></td></tr></table></figure>

<p>从参数一字符串左起取出参数二长度的字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LEFT(ename,2) FROM student;</span><br></pre></td></tr></table></figure>

<p>从参数一字符串右起取出参数二长度的字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT RIGHT(ename,2) FROM student;</span><br></pre></td></tr></table></figure>

<p>返回字符串长度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LENGTH(name) FROM student;</span><br></pre></td></tr></table></figure>

<p>全局替换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT name ,REPLACE( math, math &lt; 60,&#x27;挂科&#x27;) FROM student;</span><br></pre></td></tr></table></figure>

<p>比较字符串大小</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT STRCMP(&#x27;dbw&#x27;,&#x27;DBW&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>取出参数二到参数三之间的子字符串</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT SUBSTRING(name,1,2) FROM student;</span><br></pre></td></tr></table></figure>

<p>去除前段空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LTRIM(&#x27; d b w &#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>去除后端空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT RTRIM(&#x27; D B W &#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>去除空格</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT TRIM(&#x27; D B W &#x27;) FROM DUAL；</span><br></pre></td></tr></table></figure>

<h5 id="4，数学函数"><a href="#4，数学函数" class="headerlink" title="4，数学函数"></a>4，数学函数</h5><p>取绝对值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ABS(10) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>十进制转二进制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT BIN(10) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>向上去整</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CEILING(10.4) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>向下取整</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT FLOOR(10) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>进制转化，参数一是参数二进制的数字，现转化为参数三进制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT COVERT(8，10，2) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>保留参数二个小数位数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT FORMAT(1.148528492,5) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>转成十六进制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT HEX(100) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>求最小值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT LEAST(10,1,-10,4)FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>求余</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MOD(10,3) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>返回0-1随机数</p>
<p>若想返回0-1固定的一个随机数，就往 RAND 里面传参，一个参数对应一个随机数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT RAND() FROM DUAL;</span><br></pre></td></tr></table></figure>

<h5 id="5，日期函数"><a href="#5，日期函数" class="headerlink" title="5，日期函数"></a>5，日期函数</h5><p>获取当前日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURRENT_DATE() FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURRENT_TIME() FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取当前时间戳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CURRENT_TIMESTAMP() FROM DUAL;  </span><br></pre></td></tr></table></figure>

<p>获取当前日期加时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW() FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取英语成绩发布时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,DATE(send_time) FROM student;</span><br></pre></td></tr></table></figure>

<p>获取 10 分钟内发布的英语成绩</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM student WHERE DATE_ADD(send_time,INTERVAL,10 MINUTE) &gt;= NOW();        </span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE DATE_SUB(NOW(),INTERVAL,10 MINUTE) &lt;= send_time;   </span><br></pre></td></tr></table></figure>

<p>获取 2011－11－11 到 1990－1－1 之间相差的天数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATEDIFF(&#x27;2011-11-11&#x27;,&#x27;1990-01-01&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取年份</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT YEAR(NOW()) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取月份</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MONTH(&#x27;1993-04-11&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取天</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DAY(NOW()) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>获取 UNIX 时间到现在的毫秒数；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT UNIX_TIMESTAMP() FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>将 UNIIX 时间转换为指定格式的日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT FROM_UNIXTIME(1618483484,&#x27;%Y-%m-%d&#x27;) FROM DUAL;</span><br><span class="line"></span><br><span class="line">SELECT FROM_UNIXTIME(1618483484,&#x27;%Y-%m-%d %H:%i:%s&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>



<h5 id="6，加密函数"><a href="#6，加密函数" class="headerlink" title="6，加密函数"></a>6，加密函数</h5><h6 id="（1）MD5"><a href="#（1）MD5" class="headerlink" title="（1）MD5"></a>（1）MD5</h6><p>查询正使用数据库的用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER() FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>查询正在使用数据库的名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br></pre></td></tr></table></figure>

<p>为字符串算出一个 MD5 32的字符串，常用于用户密码的加密，加密完永远是 32 位</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT MD5(&#x27;PASSWORD&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>演示在 mysql 中的实际应用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO student VALUES(dbw,MD5(&#x27;Password233&#x27;));</span><br><span class="line">SELECT * FROM student;</span><br><span class="line">SELECT * FROM student</span><br><span class="line">	WHERE `name` = &#x27;dbw&#x27; AND pwd = MD5(&#x27;Password233&#x27;);</span><br></pre></td></tr></table></figure>

<h6 id="（2）PASSWORD"><a href="#（2）PASSWORD" class="headerlink" title="（2）PASSWORD"></a>（2）PASSWORD</h6><p>将 dbw 用 PASSWORD 加密</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT PASSWORD(&#x27;dbw&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure>

<p>查看数据库信息， root 用户的密码可见是 password 函数加密</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM mysql.user</span><br></pre></td></tr></table></figure>

<h5 id="7，流程控制函数"><a href="#7，流程控制函数" class="headerlink" title="7，流程控制函数"></a>7，流程控制函数</h5><p>三元表达式:参数一判断，正确返回参数二，错误返回参数三</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IF(TRUE,&quot;it is true&quot;,&quot;it is false&quot;);</span><br></pre></td></tr></table></figure>

<p>非空表达式：如果参数一不为空返回参数一，否则返回参数二</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(NULL,&quot;return this&quot;);</span><br></pre></td></tr></table></figure>

<p>多重分支表达式：如果参数一为真，返回参数二，如果三为真，返回四，否则返回五</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CASE WHEN expr1 THEN expr2 WHEN expr3 THEN expr4 ELSE expr5;</span><br></pre></td></tr></table></figure>

<p>多重分支的举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,(SELECT CASE</span><br><span class="line">            WHEN grades = 300 THEN &#x27;学神&#x27;</span><br><span class="line">            WHEN grades BETWEEN 250 AND 299 THEN &#x27;学霸&#x27;</span><br><span class="line">            WHEN grades BETWEEN 200 AND 249 THEN &#x27;凡人&#x27;</span><br><span class="line">            ELSE &#x27;学渣&#x27;)</span><br><span class="line">        FROM student;</span><br></pre></td></tr></table></figure>



<h2 id="七，-多表查询"><a href="#七，-多表查询" class="headerlink" title="七，*多表查询"></a>七，*多表查询</h2><h5 id="1，笛卡尔集："><a href="#1，笛卡尔集：" class="headerlink" title="1，笛卡尔集："></a>1，笛卡尔集：</h5><p>​	在不加任何控制的前提下查询两张表实际上是将两张表组合，这样返回的数据是 笛卡尔集。</p>
<p>​	组合的原理是：表一中每一行与表二中所有行依次拼接形成拼接行</p>
<p>​	一共返回的记录数是：第一张表的行数 x 第二张表的行数</p>
<p>​	笛卡尔集会产生无效的拼接组合，解决多表问题的关键在于组合的过滤条件</p>
<h5 id="2，条件过滤："><a href="#2，条件过滤：" class="headerlink" title="2，条件过滤："></a>2，条件过滤：</h5><p>举例：</p>
<p>​	无过滤条件，生成笛卡尔集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 大练习1,期中考试;</span><br></pre></td></tr></table></figure>

<p>​	现在添加过滤条件，让两个表中 name 列对应进行拼接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 大练习1,期中考试</span><br><span class="line">		WHERE 大练习1.name = 期中考试.name;</span><br></pre></td></tr></table></figure>

<p>使用注意：</p>
<p>​	查询条件不能少于：表的个数 - 1</p>
<h5 id="3，自连接："><a href="#3，自连接：" class="headerlink" title="3，自连接："></a>3，自连接：</h5><p>特点：</p>
<p>​	1，把一张表当作两张表来用</p>
<p>​	2，需要给表取别名，FROM表名后空格写别名</p>
<p>​	3，列名不明确，可以使用指定列的别名</p>
<p>举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT worker.name AS &quot;职员名&quot;,boss.name AS &quot;上级名&quot;</span><br><span class="line">		FROM emp worker,emp boss;</span><br><span class="line">		WHERE worker.mqr = boss.empno;</span><br><span class="line">SELECT FROM emp;</span><br></pre></td></tr></table></figure>

<h5 id="4，子查询："><a href="#4，子查询：" class="headerlink" title="4，子查询："></a>4，子查询：</h5><h6 id="（1）概念："><a href="#（1）概念：" class="headerlink" title="（1）概念："></a>（1）概念：</h6><p>​	指的是嵌入其它 sql 语句的 select 语句，也叫嵌套查询语句</p>
<h6 id="（2）单行子查询："><a href="#（2）单行子查询：" class="headerlink" title="（2）单行子查询："></a>（2）单行子查询：</h6><p>​	指返回一行数据的子查询语句</p>
<p>​	举例：返回与 dbw 同伴的小伙伴</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT * </span><br><span class="line">	FROM student</span><br><span class="line">		WHERE class = (</span><br><span class="line">        	SELECT deptno</span><br><span class="line">            FROM emp</span><br><span class="line">            WHERE name = &#x27;dbw&#x27;</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>

<h6 id="（3）多行子查询："><a href="#（3）多行子查询：" class="headerlink" title="（3）多行子查询："></a>（3）多行子查询：</h6><p>​	返回多行数据的子查询</p>
<p>​	举例：查询与 10号工作组 工作相同的雇员的 名字，岗位，工资，部门号，但不包含 10号工作组自己的雇员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,job,sal,deptno</span><br><span class="line">	FROM emp</span><br><span class="line">	WHERE job IN (</span><br><span class="line">    	SELECT DISTINCT job</span><br><span class="line">        FROM emp</span><br><span class="line">        WHERE deptno = 10</span><br><span class="line">    ) AND deptno &lt;&gt; 10</span><br></pre></td></tr></table></figure>

<h6 id="（4）子查询临时表："><a href="#（4）子查询临时表：" class="headerlink" title="（4）子查询临时表："></a>（4）子查询临时表：</h6><p>​	举例：获取 shop 表中每个类别的商品中价格最高的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT goods_id,cat_id,goods_name,shop_price </span><br><span class="line">		FROM (</span><br><span class="line">        		SELECT cat_id,MAX(shop_price) AS max_price</span><br><span class="line">            	FROM ecs_goods</span><br><span class="line">            	GROUP BY cat_id</span><br><span class="line">        )temp , ecs_goods</span><br><span class="line">        WHERE temp.cat_id = ecs_goods.cat_id</span><br><span class="line">        AND temp.max_price = ecs_goods.shop_price;</span><br></pre></td></tr></table></figure>

<h6 id="（5）ALL-操作符："><a href="#（5）ALL-操作符：" class="headerlink" title="（5）ALL 操作符："></a>（5）ALL 操作符：</h6><p>​	举例：显示工资比部门 30 所有员工的工资都高的员工的姓名，工资和部门号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,salary,deptno</span><br><span class="line">		FROM sal &gt; ALL(</span><br><span class="line">        	SELECT sal</span><br><span class="line">            	FROM emp</span><br><span class="line">            	WHERE deptno = 30</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<p>​	举例：显示工资比部门 30 所有员工的工资都高的员工的姓名，工资和部门号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,salary,deptno</span><br><span class="line">		FROM sal &gt; ANY(</span><br><span class="line">        	SELECT sal</span><br><span class="line">            	FROM emp</span><br><span class="line">            	WHERE deptno = 30</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>

<h6 id="（6）多列子查询："><a href="#（6）多列子查询：" class="headerlink" title="（6）多列子查询："></a>（6）多列子查询：</h6><p>​	举例：查询与 Smith 部门和岗位相同的雇员且不含 Smith 本人</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">	FROM emp</span><br><span class="line">	WHERE (deptno,job) = (</span><br><span class="line">    	SELECT deptno,job</span><br><span class="line">        FROM emp</span><br><span class="line">        WHERE name = &#x27;Smith&#x27;</span><br><span class="line">    ) AND name != &#x27;Smith&#x27;</span><br></pre></td></tr></table></figure>

<h5 id="5，合并查询："><a href="#5，合并查询：" class="headerlink" title="5，合并查询："></a>5，合并查询：</h5><p>将查询结果简单的合并</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,sal,job FROM emp WHERE sal&gt;2500</span><br><span class="line">	UNION ALL</span><br><span class="line">		SELECT name,sal,job, FROM emp WHERE job = &#x27;MANAGER&#x27;	;</span><br></pre></td></tr></table></figure>

<p>将查询结果合并并去重</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT name,sal,job FROM emp WHERE sal&gt;2500</span><br><span class="line">	UNION</span><br><span class="line">		SELECT name,sal,job, FROM emp WHERE job = &#x27;MANAGER&#x27;	;</span><br></pre></td></tr></table></figure>

<h5 id="6，外连接"><a href="#6，外连接" class="headerlink" title="6，外连接"></a>6，外连接</h5><p>当两个表中需要用不完全关联的列进行过滤时，使用 WHERE 进行条件过滤会遗漏信息，因此需要外连接</p>
<p>左外连接：</p>
<p>​	左侧的表完全显示就称为左外连接</p>
<p>右外连接：</p>
<p>​	右侧的表完全显示就称之为右外连接</p>
<p>示例：</p>
<p>​	这是一个会遗漏未参加考试学生成绩的过滤方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name`,stu.id,grade</span><br><span class="line">		FROM stu,exam</span><br><span class="line">		WHERE stu.id = exam.id;</span><br></pre></td></tr></table></figure>

<p>​	改为左外连接,返回时可以显示未参加考试学生的信息，虽然成绩列为 null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name`,stu.id,grade</span><br><span class="line">		FROM stu LEFT JOIN exam</span><br><span class="line">		WHERE stu.id = exam.id;</span><br></pre></td></tr></table></figure>

<p>​	改为右外连接，如果没有学生能匹配考试成绩，则显示学生信息为 null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT `name`,stu.id,grade</span><br><span class="line">		FROM stu RIGHT JOIN exam</span><br><span class="line">		WHERE stu.id = exam.id;</span><br></pre></td></tr></table></figure>



<h2 id="八，约束"><a href="#八，约束" class="headerlink" title="八，约束"></a>八，约束</h2><h5 id="1，定义："><a href="#1，定义：" class="headerlink" title="1，定义："></a>1，定义：</h5><p>​	用于确保数据库的数据m安祖特定的商业规则，在 mysql 中，约束包括 not null，unique，primary key，foreign key，check 五种。</p>
<h5 id="2，PRIMARY-KEY"><a href="#2，PRIMARY-KEY" class="headerlink" title="2，PRIMARY KEY"></a>2，PRIMARY KEY</h5><p>主键：</p>
<p>​	保证数据库中信息不是重复的且不能为 null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable</span><br><span class="line">		(id INT PRIMARY KEY，</span><br><span class="line">         `name` VARCHAR(32),</span><br><span class="line">         email VARCHAR(32));</span><br></pre></td></tr></table></figure>

<p>​	可以定义表~~~定义主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable</span><br><span class="line">		(id INT，</span><br><span class="line">         `name` VARCHAR(32),</span><br><span class="line">         email VARCHAR(32),</span><br><span class="line">         PRIMARY KEY(id)</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>

<p>​	一个表中最多仅有一个主键，但可以是复合主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable</span><br><span class="line">		(id INT，</span><br><span class="line">         `name` VARCHAR(32),</span><br><span class="line">         email VARCHAR(32)</span><br><span class="line">         PRIMARY KEY(id，`name`)#这是一个复合主键</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>

<p>​	查看表的情况时可以看到主键信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC mytable;	</span><br></pre></td></tr></table></figure>

<h5 id="3，NOT-NULL"><a href="#3，NOT-NULL" class="headerlink" title="3，NOT NULL"></a>3，NOT NULL</h5><p>​	保证插入数据时不能为空</p>
<h5 id="4，UNIQUE"><a href="#4，UNIQUE" class="headerlink" title="4，UNIQUE"></a>4，UNIQUE</h5><p>​	定义了唯一约束后，该列是不能重复的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable</span><br><span class="line">		(id INT，</span><br><span class="line">         `name` VARCHAR(32)	UNIQUE,</span><br><span class="line">         email VARCHAR(32) UNIQUE,</span><br><span class="line">         PRIMARY KEY(id)</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>

<p>​	UNIQUE 可以有多个 null 字段</p>
<p>​	一张表可以有多个 unique</p>
<p>​	unique 加 not null 效果近似于 primary key</p>
<h5 id="5，FOREIGN-KEY"><a href="#5，FOREIGN-KEY" class="headerlink" title="5，FOREIGN KEY"></a>5，FOREIGN KEY</h5><p>​	用来定义主表和从表之间的关系，外键约束要定义在从表上，主表则必须有主键约束或者 unique 约束，当定义外键约束后，要求外键列数据必须在主表的主键列存在或者是为 null</p>
<p>举例：</p>
<p>​	班级信息中班号作为主键，那么学生名单中，学生所在班级必须是主键中存在的，这时使用外键就可以约束这一列允许的数据必须为主键中存在的数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE myclass</span><br><span class="line">		(id INT PRIMARY KEY,</span><br><span class="line">         `name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;);</span><br><span class="line"></span><br><span class="line">CREATE TABLE mystudent</span><br><span class="line">		(id INT PRIMARY KEY,</span><br><span class="line">         `name` VARCHAR(32) NOT NULL DEFAULT &#x27;&#x27;,</span><br><span class="line">         class_id INT,</span><br><span class="line">         FOREIGN KEY (class_id) REFERENCES myclass(id));</span><br></pre></td></tr></table></figure>

<p>细节：</p>
<p>​	1，外键指向的表的字段，要求是 primary key 或者是 unique</p>
<p>​	2，表的类型是 innodb，这样的表才支持外键</p>
<p>​	3，外键字段的类型要和主键字段的类型一致，长度可以不同</p>
<p>​	4，外键字段的值，必须在主键字段中出现过，或者为 null，前提是外键字段允许为 null</p>
<p>​	5，一旦建立主外键关系，数据就不能随意删除了，主键只能在外键删完后才能删</p>
<h5 id="6，CHECK"><a href="#6，CHECK" class="headerlink" title="6，CHECK"></a>6，CHECK</h5><p>​	用于强制行数据必须满足的条件，假定在 sal 列定义了 check 约束，并要求 sal 列值在 1000~2000 之间，则不再区间的值就会出错</p>
<ul>
<li>Oracle 和 sql Server 均支持 CHECK，但是 mysql5.7 目前不支持，只能做语法校验，但不会生效。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT PRIMARY KEY,</span><br><span class="line">		`name` VARCHAR(32),</span><br><span class="line">		sex VARCHAR(6) CHECK (sex IN(&#x27;man&#x27;,&#x27;woman&#x27;)),</span><br><span class="line">		sal DOUBLE CHECK(sal &gt; 1000 AND sal &lt; 2000));</span><br></pre></td></tr></table></figure>

<h5 id="7，AUTO-INCREMENT"><a href="#7，AUTO-INCREMENT" class="headerlink" title="7，AUTO INCREMENT"></a>7，AUTO INCREMENT</h5><p>AUTO INCREAMENT</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT PRIMARY KEY AUTO INCREMENT,</span><br><span class="line">		`name` VARCHAR(32),</span><br><span class="line">		sex VARCHAR(6) CHECK (sex IN(&#x27;man&#x27;,&#x27;woman&#x27;)),</span><br><span class="line">		sal DOUBLE CHECK(sal &gt; 1000 AND sal &lt; 2000));</span><br></pre></td></tr></table></figure>

<p>当不给定 id 数值时，即给 id 的值为 null，则这一行数据会自动赋给最大数据加 1.</p>
<p>细节：</p>
<p>​	1，一般情况下自增长与主键配合使用</p>
<p>​	2，自增长可以不配合主键，但至少要配合 unique 使用</p>
<p>​	3，自增长修饰的字段为整数形的，小数型可以用但基本不这样做</p>
<p>​	4，自增长默认从 1 开始，也可以通过如下命令修改 alter table 表名 auto_increment &#x3D; xxx</p>
<h2 id="九，索引"><a href="#九，索引" class="headerlink" title="九，索引"></a>九，索引</h2><h5 id="1，索引原理"><a href="#1，索引原理" class="headerlink" title="1，索引原理"></a>1，索引原理</h5><p>将该列做成一个二叉排序树，就是数据库的索引</p>
<p>索引的代价：</p>
<p>​	1，磁盘占用</p>
<p>​	2，对 DELETE UPDATE INSERT 语句效率会有影响</p>
<p>因为项目中 SELECT 占比在 90% 以上，所以有些情况下建立索引的代价是可以接受的</p>
<h5 id="2，索引的类型"><a href="#2，索引的类型" class="headerlink" title="2，索引的类型"></a>2，索引的类型</h5><p>​	主键索引：是主键同时为索引</p>
<p>​	唯一索引：用 UNIQUE 修饰的列作为索引</p>
<p>​	普通索引：用作索引的普通列</p>
<p>​	全文索引：开发一般使用 Solr 或者 ElasticSearch（ES)</p>
<h5 id="3，查询是否有索引"><a href="#3，查询是否有索引" class="headerlink" title="3，查询是否有索引"></a>3，查询是否有索引</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEXES FROM emp;</span><br></pre></td></tr></table></figure>

<h5 id="4，创建索引"><a href="#4，创建索引" class="headerlink" title="4，创建索引"></a>4，创建索引</h5><p>在 id 列创建 唯一索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT,</span><br><span class="line">		`name` VARCHAR(32));</span><br><span class="line"></span><br><span class="line">CREATE UNIQUE INDEX id_index ON mytable(id);</span><br></pre></td></tr></table></figure>

<p>在 id 列创建 普通索引：列操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT,</span><br><span class="line">		`name` VARCHAR(32));</span><br><span class="line"></span><br><span class="line">CREATE INDEX id_index ON mytable(id);</span><br></pre></td></tr></table></figure>

<p>添加普通索引的另一种方式：表操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE mytable ADD INDEX id_index(id)</span><br></pre></td></tr></table></figure>

<p>添加主键索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT,</span><br><span class="line">		`name` VARCHAR(32));</span><br><span class="line">		</span><br><span class="line">ALTER TABLE mytable ADD PRIMARY KEY(id);#添加了主键索引</span><br></pre></td></tr></table></figure>

<h5 id="5，删除索引"><a href="#5，删除索引" class="headerlink" title="5，删除索引"></a>5，删除索引</h5><p>删除普通索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX id_index ON mytable;</span><br></pre></td></tr></table></figure>

<p>删除主键索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE mytable DROP PRIMARY KEY</span><br></pre></td></tr></table></figure>

<p>修改索引：先删除，再添加</p>
<h5 id="6，查询索引"><a href="#6，查询索引" class="headerlink" title="6，查询索引"></a>6，查询索引</h5><p>方式1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEX FROM mytable;</span><br></pre></td></tr></table></figure>

<p>方式2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEXES FROM mytable;</span><br></pre></td></tr></table></figure>

<p>方式3：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW KEYS FROM mytable；</span><br></pre></td></tr></table></figure>

<p>方式4：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC mytable;</span><br></pre></td></tr></table></figure>

<h5 id="7，索引的创建技巧"><a href="#7，索引的创建技巧" class="headerlink" title="7，索引的创建技巧"></a>7，索引的创建技巧</h5><p>​	1，较为频繁地作为查询条件的字段应该作为索引</p>
<p>​	2，唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</p>
<p>​	3，更新非常频繁的字段不适合创建索引</p>
<p>​	4，不会出现在 WHERE 子句中字段不该创建索引</p>
<h2 id="十，事务"><a href="#十，事务" class="headerlink" title="十，事务"></a>十，事务</h2><h5 id="1，概念："><a href="#1，概念：" class="headerlink" title="1，概念："></a>1，概念：</h5><p>​	事务用于保证数据的一致性，它由一组相关的 dml 语句组成，该组的 dml 语句要么全部成功，要么全部失败。如：转账需要用事务来处理，以保证数据的一致性。</p>
<h5 id="2，事务和锁："><a href="#2，事务和锁：" class="headerlink" title="2，事务和锁："></a>2，事务和锁：</h5><p>​	当执行事务时，mysql 会在表上加锁，防止其他用户更改表的数据，这对于用户来说是非常重要的</p>
<h5 id="3，数据库控制台事务的几个重要操作："><a href="#3，数据库控制台事务的几个重要操作：" class="headerlink" title="3，数据库控制台事务的几个重要操作："></a>3，数据库控制台事务的几个重要操作：</h5><p>​	start transaction 开始一个事务</p>
<p>​	savepoint 保存点名，设置保存点</p>
<p>​	rollback to 保存点名，回退事务</p>
<p>​	rollback 回退全部事务</p>
<p>​	commit 提交事务，所有的操作生效，不能回退</p>
<h5 id="4，举例："><a href="#4，举例：" class="headerlink" title="4，举例："></a>4，举例：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(</span><br><span class="line">		id INT,</span><br><span class="line">		`name` VARCHAR(32));</span><br><span class="line">		</span><br><span class="line">START TRANSACTION</span><br><span class="line">#新建节点 a</span><br><span class="line">SAVEPOINT a</span><br><span class="line">#添加数据</span><br><span class="line">INSERT INTO mytable VALUES(100,&#x27;TOM&#x27;);</span><br><span class="line">#此时有一条数据</span><br><span class="line">SELECT * FROM mytable;</span><br><span class="line">#新建节点 b</span><br><span class="line">SAVEPOINT b</span><br><span class="line">#添加数据</span><br><span class="line">INSERT INTO mytable VALUES(200,&#x27;JERRY&#x27;);</span><br><span class="line">#回退到 a，此时没有第二条数据</span><br><span class="line">ROLLBACK TO b</span><br><span class="line">#回退到 a，此时没有数据</span><br><span class="line">ROLLBACK TO b</span><br><span class="line">#提交后没有机会回退,所有节点被删除</span><br><span class="line">COMMIT </span><br></pre></td></tr></table></figure>

<p>细节：</p>
<p>​	1，如果不开始事务，默认情况下，dml 操作是自动提交的，不能回滚</p>
<p>​	2，如果开始一个事务，没有创建保存点，可以进行 ROLLBACK ，默认是回到事务开始的状态</p>
<p>​	3，可以创建多个节点，执行 dml，创建保存点，执行 dml，创建保存点….</p>
<p>​	4，nysql 需要 innodb 的存储引擎来进行事务操作，myisam 引擎不好用</p>
<p>​	5，开始一个事务：START TRANSACTION 或者 set autocommit &#x3D; off;</p>
<h5 id="5，事务隔离级别："><a href="#5，事务隔离级别：" class="headerlink" title="5，事务隔离级别："></a>5，事务隔离级别：</h5><p>脏读：</p>
<p>​	当一个事务读取另一个事务尚未提交的更改时，产生脏读</p>
<p>不可重复读：</p>
<p>​	同一查询在同一事务中多次进行，由于其它事务所做的修改或者删除，每次返回不同的结果级，此事发生不可重复读</p>
<p>幻读：</p>
<p>​	同一查询在同一事务中多次进行，由于其它提交事务所做的插入操作，每次返回不同的结果集，此事发生幻读</p>
<p>事务隔离级别：</p>
<table>
<thead>
<tr>
<th align="center">MySQL隔离级别（4种）</th>
<th align="center">脏读</th>
<th align="center">不可重复读</th>
<th align="center">幻读</th>
<th align="center">加锁读</th>
</tr>
</thead>
<tbody><tr>
<td align="center">读未提交</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">读已提交</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">可重复读</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">可串行化（Serializable）</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">√</td>
</tr>
</tbody></table>
<p>查看当前会话隔离级别：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@tx_isolation;</span><br></pre></td></tr></table></figure>

<p>查看系统当前隔离级别：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@global.tx_isolation;</span><br></pre></td></tr></table></figure>

<p>设置一个控制台的隔离级别为 READ UNCIMMITTED</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</span><br></pre></td></tr></table></figure>

<p>设置当前系统隔离级别：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</span><br></pre></td></tr></table></figure>

<p>MySQL 默认的隔离级别是 REPEATABLE READ,一般情况下，无特殊需求的话不需要修改</p>
<h2 id="十一，存储引擎"><a href="#十一，存储引擎" class="headerlink" title="十一，存储引擎"></a>十一，存储引擎</h2><h5 id="1，介绍："><a href="#1，介绍：" class="headerlink" title="1，介绍："></a>1，介绍：</h5><p>​	1，MySQL 的表类型由存储引擎（Storage Engines）决定，主要包括 MyISAM，innoDB，Memory 等</p>
<p>​	2，MySQL 数据表主要支持六种类型，分别是 CSV，Memory，ARCHIVE，MRG_MYISAM，MYISAM，InnoBDB</p>
<p>​	3，这六种又分为两类，一类是”事务安全型“，比如 InnoDB；其余属于“非事务安全型”，比如 mysiam，memory</p>
<h5 id="2，主流表类型区别："><a href="#2，主流表类型区别：" class="headerlink" title="2，主流表类型区别："></a>2，主流表类型区别：</h5><table>
<thead>
<tr>
<th align="center">特点</th>
<th align="center">Mysiam</th>
<th align="center">InnoDB</th>
<th align="center">Memory</th>
<th align="center">Archive</th>
</tr>
</thead>
<tbody><tr>
<td align="center">批量插入的速度</td>
<td align="center">高</td>
<td align="center">低</td>
<td align="center">高</td>
<td align="center">非常高</td>
</tr>
<tr>
<td align="center">事务安全</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">全文索引</td>
<td align="center">√</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">锁机制</td>
<td align="center">表锁</td>
<td align="center">行锁</td>
<td align="center">表锁</td>
<td align="center">行锁</td>
</tr>
<tr>
<td align="center">存储限制</td>
<td align="center"></td>
<td align="center">64TB</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">B树索引</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">哈希索引</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">集群索引</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">数据缓存</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">索引缓存</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">数据可压缩</td>
<td align="center">√</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">√</td>
</tr>
<tr>
<td align="center">空间使用</td>
<td align="center">低</td>
<td align="center">高</td>
<td align="center">N&#x2F;A</td>
<td align="center">非常低</td>
</tr>
<tr>
<td align="center">内存使用</td>
<td align="center">低</td>
<td align="center">高</td>
<td align="center">中等</td>
<td align="center">低</td>
</tr>
<tr>
<td align="center">支持外键</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h5 id="3，基本使用："><a href="#3，基本使用：" class="headerlink" title="3，基本使用："></a>3，基本使用：</h5><p>显示当前存储引擎：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW ENGINES;</span><br></pre></td></tr></table></figure>

<p>修改存储引擎：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE mytable ENGINE = INNODB;</span><br></pre></td></tr></table></figure>

<h5 id="4，如何选择存储引擎："><a href="#4，如何选择存储引擎：" class="headerlink" title="4，如何选择存储引擎："></a>4，如何选择存储引擎：</h5><p>​	1，如果你的应用不需要事务，处理的只是基本的 CRUD 操作，那么 MyISAM 是最优选</p>
<p>​	2，如果需要支持事务，选择 InnoDB</p>
<p>​	3，Memory 存储引擎就是将数据存储在内存中，由于没有磁盘 I&#x2F;O 的等待，速度极快，但是由于是内存存储引擎，所作的任何修改在服务器重启后都会消失</p>
<h2 id="十二，视图原理"><a href="#十二，视图原理" class="headerlink" title="十二，视图原理"></a>十二，视图原理</h2><h5 id="1，概念：-1"><a href="#1，概念：-1" class="headerlink" title="1，概念："></a>1，概念：</h5><p>​	1，视图是根据基本来创建的，视图是虚拟的表</p>
<p>​	2，视图也有列，数据来自表</p>
<p>​	3，通过视图可以修改基表的数据</p>
<p>​	4，基本的改变，也会影响到视图的数据</p>
<h5 id="2，基本使用"><a href="#2，基本使用" class="headerlink" title="2，基本使用"></a>2，基本使用</h5><p>创建视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW myview </span><br><span class="line">			AS </span><br><span class="line">			SELECT name,age,sex FROM student;</span><br></pre></td></tr></table></figure>

<p>修改视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ALTER VIEW myview </span><br><span class="line">			AS </span><br><span class="line">			SELECT name,age,sex FROM student;</span><br></pre></td></tr></table></figure>

<p>查看视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC myview;</span><br></pre></td></tr></table></figure>

<p>显示创建的视图的指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE VIEW myview;</span><br></pre></td></tr></table></figure>

<p>删除视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW myview1,myview2;</span><br></pre></td></tr></table></figure>

<h5 id="3，使用细节："><a href="#3，使用细节：" class="headerlink" title="3，使用细节："></a>3，使用细节：</h5><p>​	1，创建视图后，对应是同只有一个视图结构文件，后缀为 frm</p>
<p>​	2，视图的数据变化会影响到基表，基表数据的变化会影响到视图</p>
<p>​	3，视图中可以再使用视图</p>
<h2 id="十三，数据库管理"><a href="#十三，数据库管理" class="headerlink" title="十三，数据库管理"></a>十三，数据库管理</h2><h5 id="1，MySQL-用户："><a href="#1，MySQL-用户：" class="headerlink" title="1，MySQL 用户："></a>1，MySQL 用户：</h5><p>​	MySQL 中的用户，都存储在数据库 mysql 中 user 表中</p>
<p>​	user 表 中重要字段说明：</p>
<p>​		host：允许登陆的位置，localhost 表示该用户只允许本机登录，或者指定 ip 地址</p>
<p>​		user：用户名</p>
<p>​		authentication_string：密码，是通过 mysql 中的 password() 函数加密后的密码</p>
<h5 id="2，基本使用："><a href="#2，基本使用：" class="headerlink" title="2，基本使用："></a>2，基本使用：</h5><p>创建用户，指定登陆位置，指定密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;myuser&#x27; @&#x27;192.168.3.130&#x27; IDENTIFIED BY &#x27;Password233&#x27;;</span><br></pre></td></tr></table></figure>

<p>删除用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER &#x27;myuser&#x27; @&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure>

<p>查看用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">	FROM mysql.user;</span><br></pre></td></tr></table></figure>

<p>修改自己的密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD = PASSWORD(&#x27;123456&#x27;);</span><br></pre></td></tr></table></figure>

<p>修改别人的密码，需要 root 权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD FOR &#x27;dbw&#x27; @&#x27;localhost&#x27; = PASSWORD(&#x27;123456&#x27;);</span><br></pre></td></tr></table></figure>

<h5 id="3，权限管理："><a href="#3，权限管理：" class="headerlink" title="3，权限管理："></a>3，权限管理：</h5><h6 id="常见权限"><a href="#常见权限" class="headerlink" title="常见权限"></a>常见权限</h6><table>
<thead>
<tr>
<th align="center">权限</th>
<th align="center">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ALL</td>
<td align="center">设置除 GRSNT OPTION 外所有的简单权限</td>
</tr>
<tr>
<td align="center">ALTER</td>
<td align="center">允许使用 ALTER TABLE</td>
</tr>
<tr>
<td align="center">ALTER ROUNTINE</td>
<td align="center">更改或取消已存储的子程序</td>
</tr>
<tr>
<td align="center">CREATE</td>
<td align="center">允许使用 CREATE TABLE</td>
</tr>
<tr>
<td align="center">CREATE ROUNTINE</td>
<td align="center">创建已存储的子程序</td>
</tr>
<tr>
<td align="center">CREATE TEMPORARY TABLES</td>
<td align="center">允许使用 CREATE TEMPORARY TABLE</td>
</tr>
<tr>
<td align="center">CREATE USER</td>
<td align="center">允许使用CREATE USER,DROP USER,RENAME USER,REMOVE ALL PRIVILEGES</td>
</tr>
<tr>
<td align="center">CREATE VIEW</td>
<td align="center">允许使用 CREATE VIEW</td>
</tr>
<tr>
<td align="center">DELETE</td>
<td align="center">允许使用 DELETE</td>
</tr>
<tr>
<td align="center">DROP</td>
<td align="center">允许使用 DROP TABLE</td>
</tr>
<tr>
<td align="center">EXECUTE</td>
<td align="center">允许用户运行已存储的子程序</td>
</tr>
<tr>
<td align="center">FILE</td>
<td align="center">允许使用 SELECT…INTO OUTFILE 和 LOAD DATA INFILE</td>
</tr>
<tr>
<td align="center">INDEX</td>
<td align="center">允许使用 CREATE INDEX 和 DROP INDEX</td>
</tr>
<tr>
<td align="center">INSERT</td>
<td align="center">允许使用 INSERT</td>
</tr>
<tr>
<td align="center">LOCK TABLES</td>
<td align="center">允许对您拥有 SELECT 权限的使用者 LOCK TABLES</td>
</tr>
<tr>
<td align="center">PROCESS</td>
<td align="center">允许使用 SHOW FULL PROCESSLIST</td>
</tr>
<tr>
<td align="center">REFERENCES</td>
<td align="center">未被实施</td>
</tr>
<tr>
<td align="center">RELOAD</td>
<td align="center">允许使用 FLUSH</td>
</tr>
<tr>
<td align="center">REPLICATION CLIENT</td>
<td align="center">允许用户访问从属服务器或者主服务器的地址</td>
</tr>
<tr>
<td align="center">REPLICATION SLAVE</td>
<td align="center">用于复制从属服务器</td>
</tr>
<tr>
<td align="center">SELECT</td>
<td align="center">允许使用 SELECT</td>
</tr>
<tr>
<td align="center">SHOW DATABASES</td>
<td align="center">允许显示所有 DATABASE</td>
</tr>
<tr>
<td align="center">SHOW VIEW</td>
<td align="center">允许使用 SHOW CREATE VIEW</td>
</tr>
<tr>
<td align="center">SHUTDOWN</td>
<td align="center">允许使用 mysqldomin shutdown</td>
</tr>
<tr>
<td align="center">SUPER</td>
<td align="center">允许使用 CHANGE MASTER,KILL,PURGE MASTER LOGS 和 SET GLOBAL 语句，mysqladmin debug 命令，允许连接一次即使已达到 max_connections</td>
</tr>
<tr>
<td align="center">UPDATE</td>
<td align="center">允许使用 UPDATE</td>
</tr>
<tr>
<td align="center">USAGE</td>
<td align="center">“无权限”的同义词</td>
</tr>
<tr>
<td align="center">GRANT OPTION</td>
<td align="center">允许授予权限</td>
</tr>
</tbody></table>
<h6 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h6><p>grant 权限列表 on 库.对象名 to ‘用户名’ @‘登陆位置’ （identified by ‘密码’）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL ON DB01 TO &#x27;myuser&#x27; @&#x27;localhost&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure>

<h6 id="使用细节"><a href="#使用细节" class="headerlink" title="使用细节"></a>使用细节</h6><p>1，在创建用户的时候，如果不指定 Host，则为 %，%表示所有的 IP 都有连接权限</p>
<p>2，可以在 IP 中添加 %。例如：“192.168.3.%”.表示用户可以在 192.168.3.* 的 IP 可以登录 mysql</p>
<p>3，在删除用户的时候，如果 host 不是 %，需要明确指定用户和 IP 地址</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/04/29/SpringMVC%E7%AC%94%E8%AE%B0/" rel="prev" title="SpringMVC笔记">
                  <i class="fa fa-chevron-left"></i> SpringMVC笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/29/Java%E9%9B%86%E5%90%88-%E7%AC%94%E8%AE%B0/" rel="next" title="Java集合-笔记">
                  Java集合-笔记 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BowenDeng</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
